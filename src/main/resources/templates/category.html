<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Small Begin</title>

  <script src="/webjars/jquery/3.6.0/jquery.min.js"></script>
  <script type="text/javascript" src="/js/common.js"></script>

  <!-- navbar 및 전체 css 관련 !-->
  <link th:href="@{/css/common.css}" rel="stylesheet" />
  <link th:href="@{/css/navbar.css}" rel="stylesheet" />
  <link th:href="@{/css/footer.css}" rel="stylesheet" />
  <script th:src="@{/js/navbar.js}"></script>

  <style>
    #categoryContainer{
      text-align: center;
    }
    td{
      cursor: pointer;
    }
  </style>

</head>
<body>
<div id="categoryContainer">

  <div th:replace="/fragment/navbar.html :: fragment-nav"></div>

  <h2>이루고 싶은 목표의 카테고리를 선택해주세요</h2>

  <table id="categoryTable">
    <tr th:each="category: ${category}">
      <td th:value="${category.categoryCode}" th:utext="${category.categoryName}"
          th:id="${category.categoryName}" class="categorySelect"></td>
    </tr>
  </table>
</div>
<footer th:replace="/fragment/footer.html :: fragment-footer"></footer>
</body>

<script>
  $(function(){
    $(".categorySelect").click(function(){
      var categoryCode = $(this).val();

      //location.href 링크로 파라미터 보내기? Or 안보이는 폼 만들기?

      // hidden 처리된 폼으로 카테고리 코드 전달
      var f = document.createElement('form');
      var obj;
      obj = document.createElement('input');
      obj.setAttribute('type', 'hidden');
      obj.setAttribute('name', categoryCode);
      obj.setAttribute('value', categoryCode);

      f.appendChild(obj);
      f.setAttribute('method', 'post');
      f.setAttribute('action', '/objective');
      document.body.appendChild(f);
      f.submit();
      console.log(categoryCode);
    })
  })
</script>
</html>

